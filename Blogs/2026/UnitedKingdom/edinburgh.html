<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edinburgh - January 15-16 - United Kingdom Adventure</title>
    <link rel="stylesheet" href="../../../styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>

<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Trip Overview</a>

        <h1><span class="gradient-text">Edinburgh</span></h1>
        <p class="subtitle">January 15-16 ‚Ä¢ Royal Mile, Arthur's Seat & Scottish Heritage</p>

        <div class="blog-content">
            <!-- Edinburgh Day 6 -->
            <div class="day-section">
                <div class="day-header" style="background: linear-gradient(135deg, #7c3aed 0%, #ec4899 100%);">
                    <div class="day-title">Day 6: Edinburgh</div>
                    <div class="day-subtitle">January 15 ‚Ä¢ Glasgow to Edinburgh & City Arrival</div>
                </div>
                <div class="day-content">
                    <div class="story-text">
                        <p>After our explorations of Glasgow, we departed for Edinburgh - Scotland's historic capital. The drive from Glasgow to Edinburgh takes just over an hour along the M8 motorway, connecting Scotland's two great cities. As we approached Edinburgh, the skyline transformed dramatically: the volcanic crags of Arthur's Seat and Calton Hill rose above the Georgian and medieval architecture, creating one of Europe's most distinctive urban landscapes.</p>

                        <p>We checked into the <a href="https://www.marriott.com/en-us/hotels/ediwh-w-edinburgh/overview/" target="_blank" rel="noopener noreferrer" style="color: var(--primary); text-decoration: none; font-weight: 600;">W Edinburgh</a>, a luxury hotel occupying a prime location on St Andrew Square in the heart of Edinburgh's New Town. The hotel's contemporary design stands in striking contrast to the Georgian architecture surrounding it, offering modern luxury with panoramic city views. Our room provided stunning vistas across Edinburgh's rooftops toward the Old Town and Edinburgh Castle perched on its volcanic rock.</p>

                        <p>With a remote work session scheduled for the afternoon, we settled into the hotel's stylish spaces. The W Edinburgh's design - bold, modern, and unapologetically contemporary - creates an interesting dialogue with Edinburgh's historic character. After wrapping up work obligations, we had the evening free to begin our exploration of Scotland's capital city.</p>
                    </div>

                    <div class="highlight-box">
                        <strong>New Town vs Old Town:</strong> Edinburgh is famously divided into two distinct sections. The Old Town, centered on the Royal Mile, dates to medieval times with narrow wynds (alleys) and towering tenements. The New Town, built in the 18th century, showcases Georgian elegance with wide streets, crescents, and symmetrical squares. Together, they form a UNESCO World Heritage Site.
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Evening in Edinburgh</h3>

                    <div class="story-text">
                        <p>For our first evening in Edinburgh, we ventured onto the Royal Mile - the historic street that runs through the heart of the Old Town from Edinburgh Castle down to the Palace of Holyroodhouse. This iconic thoroughfare, technically comprised of several connecting streets (Castlehill, Lawnmarket, High Street, and Canongate), has been Edinburgh's main artery for centuries.</p>

                        <p>Walking the Royal Mile at dusk, we experienced Edinburgh's unique atmosphere. The medieval closes (narrow passageways) branching off the main street led into hidden courtyards and staircases. Historic landmarks lined our route: St Giles' Cathedral with its distinctive crown spire, the Tron Kirk, and countless shops selling tartan, whisky, and Scottish crafts. Street performers and bagpipers added to the ambiance despite the winter chill.</p>

                        <p>Edinburgh in January brought crisp, cold air and the possibility of frost, but also fewer crowds than the festival-packed summer months. The city took on a different character in winter - more intimate, with locals going about their daily lives and the historic sites less crowded. Early darkness meant Edinburgh's landmarks illuminated against the night sky, creating a dramatic atmosphere perfect for exploring Scotland's capital.</p>
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Arrival Day</h3>

                    <div class="photo-gallery">
                        <div class="photo-card">
                            <img src="Photos/2026-01-15/City_of_Edinburgh/4a197b74ed984feb.webp" alt="Edinburgh arrival">
                            <div class="photo-caption">Arriving in Edinburgh - Scotland's dramatic capital</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-15/City_of_Edinburgh/50f60018fcece56a.webp" alt="Edinburgh architecture">
                            <div class="photo-caption">Edinburgh's distinctive blend of medieval and Georgian architecture</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-15/City_of_Edinburgh/7adf8ee663d0e1ae.webp" alt="City views">
                            <div class="photo-caption">Views across Edinburgh's rooftops and spires</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-15/City_of_Edinburgh/811741894d2c9d63.webp" alt="Royal Mile evening">
                            <div class="photo-caption">The Royal Mile in the evening light</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-15/City_of_Edinburgh/97372022eba7a921.webp" alt="Edinburgh twilight">
                            <div class="photo-caption">Winter twilight settling over Edinburgh's historic center</div>
                        </div>
                    </div>

                    <div style="background: var(--gray-50); padding: 1.5rem; border-radius: var(--radius-lg); margin-top: 2rem;">
                        <h4 style="font-weight: 600; color: var(--text-secondary); margin: 0 0 1rem 0;">Work-Travel Balance üíª</h4>
                        <p style="margin: 0; color: var(--text-secondary);">
                            <strong style="color: var(--primary);">Remote Work on the Road:</strong> Our afternoon work session at the W Edinburgh demonstrated the flexibility of modern work-travel arrangements. The hotel's high-speed WiFi, comfortable work spaces, and professional environment made it easy to maintain productivity while traveling. By scheduling work during the middle of the day, we could explore during the most atmospheric morning and evening hours.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Edinburgh Day 7 -->
            <div class="day-section">
                <div class="day-header" style="background: linear-gradient(135deg, #7c3aed 0%, #ec4899 100%);">
                    <div class="day-title">Day 7: Edinburgh</div>
                    <div class="day-subtitle">January 16 ‚Ä¢ Arthur's Seat Summit & Old Town Exploration</div>
                </div>
                <div class="day-content">
                    <div class="story-text">
                        <p>We began our full day of Edinburgh exploration with an early morning hike up Arthur's Seat, the 251-meter (823-foot) peak that dominates Edinburgh's skyline. This extinct volcano, part of Holyrood Park, sits right in the heart of the city - a remarkable piece of wilderness within an urban landscape. The main trail starts near the Scottish Parliament building and winds upward through rocky terrain, offering increasingly spectacular views with every step.</p>

                        <p>The January morning brought crisp, clear conditions perfect for hiking. The climb to the summit takes about 45 minutes to an hour depending on pace and route chosen. We followed the main path, which while steep in sections, is well-maintained and accessible to most fitness levels. The volcanic rock formations - basalt columns and ancient lava flows - create dramatic geology visible throughout the climb.</p>

                        <p>Reaching the summit of Arthur's Seat rewarded us with panoramic views across Edinburgh and far beyond. To the north, the Firth of Forth gleamed in the morning light with the bridges spanning to Fife visible in the distance. The entire city spread below us: the medieval Old Town clustered around the Royal Mile, the Georgian New Town with its orderly streets and crescents, Edinburgh Castle commanding its rocky perch, and Calton Hill with its neoclassical monuments. On clear days, views extend to the Pentland Hills, the Ochil Hills, and even across to the Highland mountains.</p>
                    </div>

                    <div class="highlight-box">
                        <strong>Arthur's Seat Hiking Guide:</strong> The extinct volcano offers several routes to the summit. The main path from Holyrood Park is the most popular (moderate difficulty, 1.5-2 hours round trip). Wear proper hiking shoes - the volcanic rock can be slippery when wet. Early morning provides the best light for photography and fewer crowds. The 360-degree views from the summit make it Edinburgh's best viewpoint.
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Edinburgh Landmarks</h3>

                    <div id="edinburgh-map" style="height: 400px; margin: 2rem 0; border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-lg);"></div>

                    <div class="story-text">
                        <p>After descending from Arthur's Seat, we spent the afternoon exploring Edinburgh's Old Town in depth. The Royal Mile became our central corridor for discovery, but it was the closes (narrow alleyways) leading off it that revealed Edinburgh's true character. Mary King's Close, Advocate's Close, and dozens of others provided glimpses into medieval Edinburgh - steep stairs descending into hidden courtyards, atmospheric passageways, and unexpected viewpoints.</p>

                        <p>Edinburgh Castle, perched on its volcanic rock 130 meters above sea level, dominates the Old Town's western end. While we didn't tour the castle interior on this visit, its presence defines Edinburgh's skyline and history. The fortress has been a royal residence, military garrison, and prison over its thousand-year history. From various vantage points around the city, the castle presents different faces - imposing from below, picturesque from Princes Street Gardens, and dramatic when floodlit at night.</p>

                        <p>We explored Calton Hill, Edinburgh's other major volcanic outcrop, rising on the eastern edge of the New Town. The hill's crown of neoclassical monuments - including the never-completed National Monument (Edinburgh's "Disgrace"), the Nelson Monument tower, and the City Observatory - creates a distinctive silhouette. The hilltop offers superb views across to Arthur's Seat, down Princes Street, and over the Firth of Forth.</p>
                    </div>

                    <div class="highlight-box">
                        <strong>Royal Mile Highlights:</strong> The historic street connects Edinburgh Castle to Holyrood Palace over approximately one Scottish mile. Key sites include St Giles' Cathedral (12th century), the Real Mary King's Close (preserved underground street), John Knox House (15th century), and countless shops, pubs, and restaurants. Allow 2-3 hours to walk its length with stops for exploring.
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Arthur's Seat & Edinburgh Views</h3>

                    <div class="photo-gallery">
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/1a73b6300f61723b.webp" alt="Arthur's Seat trail">
                            <div class="photo-caption">The trail leading up Arthur's Seat through volcanic terrain</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/3fef8d48151e09ac.webp" alt="Summit views">
                            <div class="photo-caption">Panoramic views from the 251-meter summit</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/43193183ecc721b0.webp" alt="City panorama">
                            <div class="photo-caption">Edinburgh spread out below from Arthur's Seat</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/478cd64847e73111.webp" alt="Volcanic rock">
                            <div class="photo-caption">Ancient volcanic rock formations on the climb</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/50023802b3a52db3.webp" alt="Firth of Forth">
                            <div class="photo-caption">Views north across the Firth of Forth</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/515afe82763681ec.webp" alt="Edinburgh Castle view">
                            <div class="photo-caption">Edinburgh Castle commanding its volcanic rock</div>
                        </div>
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Old Town & Historic Edinburgh</h3>

                    <div class="photo-gallery">
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/6faa7d710a9e47e3.webp" alt="Royal Mile">
                            <div class="photo-caption">The historic Royal Mile connecting castle to palace</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/73b08e0f3a225e8a.webp" alt="Old Town architecture">
                            <div class="photo-caption">Medieval tenements towering over narrow wynds</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/c01c66e8e3b5ffa8.webp" alt="Close entrance">
                            <div class="photo-caption">One of Edinburgh's atmospheric closes leading off the Royal Mile</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/cc8d7c8aa6de2a39.webp" alt="St Giles Cathedral">
                            <div class="photo-caption">St Giles' Cathedral with its distinctive crown spire</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/cd6614b2020ccaf0.webp" alt="Calton Hill">
                            <div class="photo-caption">Calton Hill's neoclassical monuments above the New Town</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/d673f8333d3ce688.webp" alt="City streets">
                            <div class="photo-caption">Edinburgh's layered architecture from medieval to Georgian</div>
                        </div>
                    </div>

                    <h3 style="font-family: 'Space Grotesk', sans-serif; color: var(--primary); margin: 2rem 0 1rem 0;">Evening in the Capital</h3>

                    <div class="story-text">
                        <p>As evening approached, we continued exploring Edinburgh's streets as they took on a different character in the winter twilight. Princes Street, the New Town's main thoroughfare, runs along the base of the Old Town's dramatic cliff face. The street offers unique views up to the castle and across Princes Street Gardens, the former loch bed that once separated Old and New Edinburgh.</p>

                        <p>Edinburgh's Scottish identity expresses itself everywhere - from the architecture and place names to the accents and cultural institutions. The city served as Scotland's capital for centuries and remains the seat of Scottish government with the modern Scottish Parliament building near Holyrood. This proud heritage, combined with world-class universities, vibrant cultural festivals (including the famous Edinburgh Fringe), and dramatic natural setting, creates a city unlike any other in Britain.</p>

                        <p>Our two days in Edinburgh provided just a glimpse of Scotland's capital. We experienced its dramatic landscape climbing Arthur's Seat, explored its medieval Old Town along the Royal Mile, admired its Georgian New Town from our hotel, and felt its distinctive Scottish character throughout. The city's blend of natural drama (extinct volcanoes within city limits), architectural heritage (medieval and Georgian UNESCO sites), and modern sophistication (luxury hotels, fine dining, contemporary culture) creates an unforgettable destination worthy of much longer exploration.</p>
                    </div>

                    <div class="photo-gallery">
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/d8725547f66341e3.webp" alt="Edinburgh evening">
                            <div class="photo-caption">Edinburgh's landmarks illuminated as evening falls</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/d8ba176c7b276c3e.webp" alt="Night cityscape">
                            <div class="photo-caption">The city takes on a magical quality at night</div>
                        </div>
                        <div class="photo-card">
                            <img src="Photos/2026-01-16/City_of_Edinburgh/fc26c9f93c4b05e4.webp" alt="Winter twilight">
                            <div class="photo-caption">Winter twilight over Scotland's historic capital</div>
                        </div>
                    </div>

                    <div style="background: var(--gray-50); padding: 1.5rem; border-radius: var(--radius-lg); margin-top: 2rem;">
                        <h4 style="font-weight: 600; color: var(--text-secondary); margin: 0 0 1rem 0;">Edinburgh's Volcanic Landscape üåã</h4>
                        <p style="margin: 0; color: var(--text-secondary);">
                            <strong style="color: var(--primary);">Ancient Geology:</strong> Edinburgh's dramatic topography results from volcanic activity 350 million years ago during the Carboniferous period. Arthur's Seat is the remains of an extinct volcano, while Edinburgh Castle sits on a volcanic plug - the solidified magma that once filled a volcano's vent. During the Ice Age, glaciers carved around these hard volcanic rocks, creating the distinctive crag-and-tail formations visible throughout the city. This geology creates Edinburgh's unique character - a city built on and around ancient volcanoes.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            <div class="lightbox-counter" id="lightbox-counter"></div>
            <button class="lightbox-nav lightbox-prev" id="lightbox-prev" onclick="navigateLightbox(-1)">&#8249;</button>
            <button class="lightbox-nav lightbox-next" id="lightbox-next" onclick="navigateLightbox(1)">&#8250;</button>

            <div class="lightbox-image-container">
                <img id="lightbox-image" class="lightbox-image" src="" alt="">
            </div>

            <div class="lightbox-info" id="lightbox-info">
                <h3 id="lightbox-title">Photo Details</h3>
                <div id="lightbox-metadata"></div>
            </div>
        </div>
    </div>

    <script>
        // Photo data with metadata paths
        const photoMetadata = {};
        let allPhotos = [];
        let currentPhotoIndex = 0;

        // Build photo list from the page
        function buildPhotoList() {
            const photoCards = document.querySelectorAll('.photo-card');
            allPhotos = Array.from(photoCards).map((card, index) => {
                const img = card.querySelector('img');
                const caption = card.querySelector('.photo-caption');
                return {
                    index: index,
                    src: img.src,
                    alt: img.alt,
                    caption: caption ? caption.textContent : '',
                    element: card
                };
            });
        }

        // Load metadata for a specific photo
        async function loadPhotoMetadata(photoSrc) {
            // Extract the path from the photo src
            const pathMatch = photoSrc.match(/Photos\/([\d-]+)\/([^\/]+)\/([^\/]+\.webp)/);
            if (!pathMatch) return null;

            const [, date, location, filename] = pathMatch;
            const metadataPath = `Photos/${date}/${location}/photo_metadata.json`;

            // Check cache first
            if (photoMetadata[metadataPath]) {
                const metadata = photoMetadata[metadataPath];
                return metadata.find(m => m.OptimizedImages?.WebPImage === filename);
            }

            // Load metadata
            try {
                const response = await fetch(metadataPath);
                if (!response.ok) return null;
                const data = await response.json();
                photoMetadata[metadataPath] = data;
                return data.find(m => m.OptimizedImages?.WebPImage === filename);
            } catch (error) {
                console.error('Error loading metadata:', error);
                return null;
            }
        }

        // Format date and time
        function formatDateTime(dateStr) {
            if (!dateStr) return '';
            const match = dateStr.match(/(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})/);
            if (!match) return dateStr;
            const [, year, month, day, hour, minute] = match;
            const date = new Date(year, month - 1, day, hour, minute);
            return date.toLocaleString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit'
            });
        }

        // Display photo in lightbox
        async function showLightbox(index) {
            currentPhotoIndex = index;
            const photo = allPhotos[index];
            const lightbox = document.getElementById('lightbox');
            const image = document.getElementById('lightbox-image');
            const counter = document.getElementById('lightbox-counter');
            const metadataDiv = document.getElementById('lightbox-metadata');
            const title = document.getElementById('lightbox-title');

            // Show lightbox
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Set image
            image.src = photo.src;
            image.alt = photo.alt;

            // Set counter
            counter.textContent = `${index + 1} / ${allPhotos.length}`;

            // Update navigation buttons
            updateNavButtons();

            // Set title
            title.textContent = photo.caption || 'Photo Details';

            // Load and display metadata
            metadataDiv.innerHTML = '<p style="color: var(--text-muted); font-style: italic;">Loading details...</p>';

            const metadata = await loadPhotoMetadata(photo.src);

            if (metadata) {
                let html = '';

                // Location Section
                if (metadata.City || metadata.State || metadata.DisplayName) {
                    html += '<div class="lightbox-info-section">';
                    html += '<h4>Location</h4>';
                    if (metadata.City) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">City</span>
                            <span class="lightbox-info-value">${metadata.City}</span>
                        </div>`;
                    }
                    if (metadata.State) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">State</span>
                            <span class="lightbox-info-value">${metadata.State}</span>
                        </div>`;
                    }
                    if (metadata.DisplayName) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Place</span>
                            <span class="lightbox-info-value" style="max-width: 200px;">${metadata.DisplayName.split(',').slice(0, 2).join(',')}</span>
                        </div>`;
                    }
                    if (metadata.Latitude && metadata.Longitude) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Coordinates</span>
                            <span class="lightbox-info-value">${metadata.Latitude.toFixed(4)}, ${metadata.Longitude.toFixed(4)}</span>
                        </div>`;
                    }
                    html += '</div>';
                }

                // Date & Time Section
                if (metadata.DateTaken) {
                    html += '<div class="lightbox-info-section">';
                    html += '<h4>Date & Time</h4>';
                    html += `<div class="lightbox-info-item">
                        <span class="lightbox-info-label">Taken</span>
                        <span class="lightbox-info-value">${formatDateTime(metadata.DateTaken)}</span>
                    </div>`;
                    html += '</div>';
                }

                // Camera Section
                if (metadata.CameraMake || metadata.CameraModel) {
                    html += '<div class="lightbox-info-section">';
                    html += '<h4>Camera</h4>';
                    if (metadata.CameraModel) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Model</span>
                            <span class="lightbox-info-value">${metadata.CameraModel}</span>
                        </div>`;
                    }
                    if (metadata.LensModel && !metadata.LensModel.includes(metadata.CameraModel)) {
                        const lensShort = metadata.LensModel.split(' ').slice(-2).join(' ');
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Lens</span>
                            <span class="lightbox-info-value">${lensShort}</span>
                        </div>`;
                    }
                    html += '</div>';
                }

                // Settings Section
                if (metadata.ISO || metadata.ExposureTime || metadata.FNumber || metadata.FocalLength) {
                    html += '<div class="lightbox-info-section">';
                    html += '<h4>Settings</h4>';
                    if (metadata.FocalLength) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Focal Length</span>
                            <span class="lightbox-info-value">${metadata.FocalLength}</span>
                        </div>`;
                    }
                    if (metadata.FNumber) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Aperture</span>
                            <span class="lightbox-info-value">${metadata.FNumber}</span>
                        </div>`;
                    }
                    if (metadata.ExposureTime) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">Shutter</span>
                            <span class="lightbox-info-value">${metadata.ExposureTime}</span>
                        </div>`;
                    }
                    if (metadata.ISO) {
                        html += `<div class="lightbox-info-item">
                            <span class="lightbox-info-label">ISO</span>
                            <span class="lightbox-info-value">${metadata.ISO}</span>
                        </div>`;
                    }
                    html += '</div>';
                }

                metadataDiv.innerHTML = html;
            } else {
                metadataDiv.innerHTML = `
                    <div class="lightbox-info-section">
                        <p style="color: var(--text-muted); font-style: italic;">
                            ${photo.caption}
                        </p>
                    </div>
                `;
            }
        }

        // Close lightbox
        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Navigate between photos
        function navigateLightbox(direction) {
            const newIndex = currentPhotoIndex + direction;
            if (newIndex >= 0 && newIndex < allPhotos.length) {
                showLightbox(newIndex);
            }
        }

        // Update navigation button states
        function updateNavButtons() {
            const prevBtn = document.getElementById('lightbox-prev');
            const nextBtn = document.getElementById('lightbox-next');

            if (currentPhotoIndex === 0) {
                prevBtn.classList.add('disabled');
            } else {
                prevBtn.classList.remove('disabled');
            }

            if (currentPhotoIndex === allPhotos.length - 1) {
                nextBtn.classList.add('disabled');
            } else {
                nextBtn.classList.remove('disabled');
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Edinburgh map
            const edinburghMap = L.map('edinburgh-map', {
                zoomControl: true,
                scrollWheelZoom: false
            }).setView([55.9533, -3.1883], 13);

            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                subdomains: 'abcd',
                maxZoom: 20
            }).addTo(edinburghMap);

            // Edinburgh points of interest
            const edinburghPoints = [
                { lat: 55.9533, lng: -3.1883, name: 'Edinburgh Castle', emoji: 'üè∞', desc: 'Historic fortress' },
                { lat: 55.9445, lng: -3.1619, name: "Arthur's Seat", emoji: '‚õ∞Ô∏è', desc: '251m extinct volcano' },
                { lat: 55.9506, lng: -3.1902, name: 'Royal Mile', emoji: 'üö∂', desc: 'Historic High Street' },
                { lat: 55.9558, lng: -3.1951, name: 'W Edinburgh', emoji: 'üè®', desc: 'St Andrew Square' },
                { lat: 55.9512, lng: -3.1953, name: 'Calton Hill', emoji: 'üèõÔ∏è', desc: 'City viewpoint' },
                { lat: 55.9485, lng: -3.1999, name: 'Princes Street', emoji: 'üõçÔ∏è', desc: 'Main shopping street' }
            ];

            edinburghPoints.forEach((point) => {
                const marker = L.marker([point.lat, point.lng], {
                    icon: L.divIcon({
                        className: 'custom-marker',
                        html: `<div style="font-size: 24px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">${point.emoji}</div>`,
                        iconSize: [30, 30],
                        iconAnchor: [15, 15]
                    })
                }).addTo(edinburghMap);

                marker.bindPopup(`
                    <div style="font-family: 'Space Grotesk', sans-serif; min-width: 150px;">
                        <strong style="color: #7c3aed; font-size: 1.1em;">${point.emoji} ${point.name}</strong>
                        <br>
                        <span style="color: #64748b; font-size: 0.9em;">${point.desc}</span>
                    </div>
                `);
            });

            buildPhotoList();

            // Add click handlers to all photo cards
            allPhotos.forEach((photo, index) => {
                photo.element.addEventListener('click', () => showLightbox(index));
            });

            // Close lightbox when clicking outside
            document.getElementById('lightbox').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                const lightbox = document.getElementById('lightbox');
                if (!lightbox.classList.contains('active')) return;

                switch(e.key) {
                    case 'Escape':
                        closeLightbox();
                        break;
                    case 'ArrowLeft':
                        if (currentPhotoIndex > 0) navigateLightbox(-1);
                        break;
                    case 'ArrowRight':
                        if (currentPhotoIndex < allPhotos.length - 1) navigateLightbox(1);
                        break;
                }
            });
        });
    </script>
</body>

</html>
